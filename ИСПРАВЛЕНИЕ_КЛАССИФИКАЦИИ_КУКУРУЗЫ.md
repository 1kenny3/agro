# üåΩ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫—É–∫—É—Ä—É–∑—ã

## –ü—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∞ –∫—É–∫—É—Ä—É–∑—É –∫–∞–∫ —è—á–º–µ–Ω—å, —á—Ç–æ –±—ã–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–µ.

## –†–µ—à–µ–Ω–∏–µ

### 1. –£–ª—É—á—à–µ–Ω–Ω—ã–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
–î–æ–±–∞–≤–ª–µ–Ω —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∫—É–∫—É—Ä—É–∑—ã:

#### –ù–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∞–Ω–∞–ª–∏–∑–∞:
- **–ú–µ—Ç–µ–ª–∫–∏**: –ü–æ–∏—Å–∫ –∂–µ–ª—Ç–æ-–∫–æ—Ä–∏—á–Ω–µ–≤—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: –ê–Ω–∞–ª–∏–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Å—Ç–µ–±–ª–µ–π
- **–®–∏—Ä–æ–∫–∏–µ –ª–∏—Å—Ç—å—è**: –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–∏—Å—Ç—å–µ–≤
- **–ó–µ–ª–µ–Ω—ã–π –ø–æ–∫—Ä–æ–≤**: –¶–≤–µ—Ç–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã—Ö –∑–µ–ª–µ–Ω—ã—Ö —Ç–æ–Ω–æ–≤ –∫—É–∫—É—Ä—É–∑—ã
- **–ü–æ–ª–æ—Å–∞—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ–ª–æ—Å –Ω–∞ –ª–∏—Å—Ç—å—è—Ö –∫—É–∫—É—Ä—É–∑—ã
- **–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∫—Ä–∞–µ–≤**: –ê–Ω–∞–ª–∏–∑ —á–µ—Ç–∫–æ—Å—Ç–∏ –∫—Ä–∞–µ–≤ –ª–∏—Å—Ç—å–µ–≤
- **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω**: –ö—É–∫—É—Ä—É–∑–∞ –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é

#### –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏:
```python
corn_score = 0.0

# –ú–µ—Ç–µ–ª–∫–∏ - –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –∫—É–∫—É—Ä—É–∑—ã
if tassel_ratio > 0.02:
    corn_score += 0.3

# –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
if vertical_lines > 0.25:
    corn_score += 0.2
if vertical_struct_ratio > 0.15:
    corn_score += 0.15

# –ò –¥—Ä—É–≥–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏...
```

### 2. –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏:

#### –ê. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:
–ï—Å–ª–∏ –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –ù–ï –∫—É–∫—É—Ä—É–∑—É, –Ω–æ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫—É–∫—É—Ä—É–∑—É:
```python
if base_predicted_class != "corn" and corn_analysis["is_corn_likely"]:
    predicted_class = "corn"
    confidence = min(0.75 + corn_analysis["corn_score"] * 0.2, 0.95)
```

#### –ë. –£—Å–∏–ª–µ–Ω–∏–µ —Å–ª–∞–±—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π:
–ï—Å–ª–∏ –º–æ–¥–µ–ª—å —Å–ª–∞–±–æ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∫—É–∫—É—Ä—É–∑—É, –Ω–æ –∞–Ω–∞–ª–∏–∑ —Å–∏–ª—å–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:
```python
elif base_predicted_class == "corn" and confidence < 0.7 and corn_analysis["corn_score"] > 0.6:
    confidence = min(0.8 + corn_analysis["corn_score"] * 0.15, 0.95)
```

#### –í. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö:
–ï—Å–ª–∏ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∫—É–∫—É—Ä—É–∑—É, –Ω–æ –∞–Ω–∞–ª–∏–∑ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:
```python
elif base_predicted_class == "corn" and not corn_analysis["is_corn_likely"]:
    confidence = max(confidence - 0.1, 0.3)  # –°–Ω–∏–∂–∞–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
```

### 3. –ê–Ω—Å–∞–º–±–ª–µ–≤—ã–π –ø–æ–¥—Ö–æ–¥
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä:
- **ConvNeXt**: –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç—É—Ä –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä
- **EfficientNet-B4**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **ResNet50**: –ù–∞–¥–µ–∂–Ω–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –º–æ–¥–µ–ª—å

### 4. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –æ—Ç–≤–µ—Ç API:
- `corn_analysis`: –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∫—É–∫—É—Ä—É–∑—ã
- `morphology_analysis`: –û–±—â–∏–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- `model_results`: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- `analysis_notes`: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –∞–Ω–∞–ª–∏–∑–∞

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ö—É–∫—É—Ä—É–∑–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª–∞—Å—å –∫–∞–∫ **—è—á–º–µ–Ω—å** —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ö—É–∫—É—Ä—É–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ **–∫—É–∫—É—Ä—É–∑–∞**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã:
```json
{
  "predicted_class": "corn",
  "predicted_class_ru": "–∫—É–∫—É—Ä—É–∑–∞",
  "confidence": 0.950,
  "analysis_notes": [
    "üåΩ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∫—É–∫—É—Ä—É–∑—ã",
    "üéØ –û–±—â–∏–π —Å—á–µ—Ç –∫—É–∫—É—Ä—É–∑—ã: 1.000",
    "‚úÖ –ú–µ—Ç–µ–ª–∫–∏ –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏: 0.446",
    "‚úÖ –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: 0.883",
    "üß† –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –±–∞–∑–æ–≤—É—é –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é"
  ]
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
python test_corn_fix.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
# –ó–∞–ø—É—Å–∫ API
python run_api.py

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
python test_api_corn.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
```bash
# –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
python run_frontend.py

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8501
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. `src/models/crop_classifier.py` - –£–ª—É—á—à–µ–Ω–Ω—ã–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
2. `src/api/schemas.py` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤
3. `test_corn_fix.py` - –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
4. `test_api_corn.py` - –¢–µ—Å—Ç API

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `_analyze_corn_features()` - –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∫—É–∫—É—Ä—É–∑—ã
- `predict()` - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- `ImprovedCropClassifier` - –£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫—É–∫—É—Ä—É–∑—ã –∫–∞–∫ —è—á–º–µ–Ω—è –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω–∞ —á–µ—Ä–µ–∑:
1. **–ì–ª—É–±–æ–∫–∏–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∫—É–∫—É—Ä—É–∑—ã
2. **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ü–∏—é** –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –±–∞–∑–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
3. **–ê–Ω—Å–∞–º–±–ª–µ–≤—ã–π –ø–æ–¥—Ö–æ–¥** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–º–∏
4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É** –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –Ω–∞–¥–µ–∂–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫—É–∫—É—Ä—É–∑—É –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Ä–µ—à–µ–Ω–∏–π. 